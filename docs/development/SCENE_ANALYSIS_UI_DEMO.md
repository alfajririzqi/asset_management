# Scene Analysis UI Demo

## ğŸ“Š Dialog Popup Preview

Berikut adalah tampilan **Dialog Popup** yang muncul setelah Scene Analysis selesai:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    Scene Analysis Complete âœ…                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ ğŸ“„ Scene_DataUsage Report:                              â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ ========================================================â”‚ â•‘
â•‘  â”‚ SCENE DATA USAGE REPORT                                 â”‚ â•‘
â•‘  â”‚ Generated: 2025-11-04 14:23:45                          â”‚ â•‘
â•‘  â”‚ ========================================================â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ OBJECT: Cube [8 verts] [1 material(s)]                  â”‚ â•‘
â•‘  â”‚   â””â”€ MATERIAL: Material.001                             â”‚ â•‘
â•‘  â”‚        â””â”€ BaseColor_1k.png                              â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ OBJECT: Sphere [482 verts] [2 material(s)]              â”‚ â•‘
â•‘  â”‚   â””â”€ MATERIAL: Metal_Material                           â”‚ â•‘
â•‘  â”‚        â”œâ”€ Metallic_1k.png                               â”‚ â•‘
â•‘  â”‚        â”œâ”€ Roughness_1k.png                              â”‚ â•‘
â•‘  â”‚        â””â”€ Normal_1k.png                                 â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ OBJECT: Character [15.2K verts] [3 material(s)]         â”‚ â•‘
â•‘  â”‚   â””â”€ MATERIAL: Skin_Material                            â”‚ â•‘
â•‘  â”‚        â”œâ”€ Skin_Diffuse.png                              â”‚ â•‘
â•‘  â”‚        â””â”€ Skin_Normal.png                               â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ ... 87 more lines â‹¯                                     â”‚ â•‘
â•‘  â”‚ See full report â†’ â„¹                                     â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ ğŸ“„ Scene_TexturePaths Report:                           â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ ========================================================â”‚ â•‘
â•‘  â”‚ TEXTURE PATHS REPORT                                    â”‚ â•‘
â•‘  â”‚ Generated: 2025-11-04 14:23:45                          â”‚ â•‘
â•‘  â”‚ ========================================================â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ [FOUND]                                                 â”‚ â•‘
â•‘  â”‚   â€¢ //textures/BaseColor_1k.png == (1024x1024) [2.4 MB] â”‚ â•‘
â•‘  â”‚   â€¢ //textures/Normal_1k.png == (1024x1024) [3.1 MB]    â”‚ â•‘
â•‘  â”‚   â€¢ //textures/Roughness_1k.png == (1024x1024) [512 KB] â”‚ â•‘
â•‘  â”‚   â€¢ //textures/Metallic_1k.png == (1024x1024) [450 KB]  â”‚ â•‘
â•‘  â”‚   â€¢ //textures/AO_1k.png == (1024x1024) [380 KB]        â”‚ â•‘
â•‘  â”‚   â€¢ //textures/Emissive_1k.png == (1024x1024) [1.2 MB]  â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ [LINKED LIBRARIES]                                      â”‚ â•‘
â•‘  â”‚ Library: //libs/character.blend                         â”‚ â•‘
â•‘  â”‚   Textures: 8                                           â”‚ â•‘
â•‘  â”‚     â€¢ Character_Diffuse.png (2048x2048)                 â”‚ â•‘
â•‘  â”‚     â€¢ Character_Normal.png (2048x2048)                  â”‚ â•‘
â•‘  â”‚                                                          â”‚ â•‘
â•‘  â”‚ ... 34 more lines â‹¯                                     â”‚ â•‘
â•‘  â”‚ See full report â†’ â„¹                                     â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚    [ Switch to Scripting Workspace ] ğŸ’¼                 â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                â•‘
â•‘                            [ OK ]                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ¯ User Workflow

### Step 1: Run Analysis
User klik **"Analyze Scene Deeply"** di panel â†’ Progress bar 0-100%

### Step 2: Dialog Appears (600px width)
Dialog popup muncul dengan:
- âœ… **Header**: "Scene Analysis Complete" 
- ğŸ“„ **Scene_DataUsage Preview**: 15 baris **SKIP stats** (langsung ke OBJECT list)
- ğŸ”¢ **Remaining Lines**: "... 87 more lines" + hint
- ğŸ“„ **Scene_TexturePaths Preview**: 15 baris **SKIP stats** (langsung ke [FOUND])
- ğŸ”¢ **Remaining Lines**: "... 34 more lines" + hint
- ğŸ’¼ **Button**: "Switch to Scripting Workspace"

### Step 3: Switch to Scripting Workspace
User klik **"Switch to Scripting Workspace"** button â†’ Blender switch ke **Scripting workspace** dan Text Editor otomatis load `Scene_DataUsage`.

## ğŸ”§ Technical Details

### Dialog Components

```python
def draw(self, context):
    layout = self.layout
    
    # 1. HEADER BOX
    box = layout.box()
    box.label(text="âœ… Scene Analysis Complete", icon='CHECKMARK')
    
    # 2. SCENE_DATAUSAGE PREVIEW (15 lines, no stats)
    data_usage = bpy.data.texts.get("Scene_DataUsage")
    content = data_usage.as_string()
    lines = content.split('\n')
    
    box = layout.box()
    box.label(text="ğŸ“„ Scene_DataUsage Report:", icon='TEXT')
    
    col = box.column(align=True)
    col.scale_y = 0.7
    
    # Skip stats section, show content directly (after "----")
    preview_count = 0
    start_showing = False
    
    for line in lines:
        if not start_showing:
            if line.startswith("----"):  # Divider after stats
                start_showing = True
                continue
        
        if start_showing and preview_count < 15:
            col.label(text=line)
            preview_count += 1
    
    # Show remaining lines indicator
    if len(lines) - skipped_lines > 15:
        remaining = len(lines) - skipped_lines - 15
        box.separator()
        row = box.row()
        row.label(text=f"... {remaining} more lines", icon='THREE_DOTS')
        row.label(text="See full report â†’", icon='INFO')
    
    # 3. SCENE_TEXTUREPATHS PREVIEW (same pattern)
    texture_report = bpy.data.texts.get("Scene_TexturePaths")
    # ... same logic
    
    # 4. ACTION BUTTON (to the point, no extra label)
    layout.operator("scene.open_text_editor_area", 
                   text="Switch to Scripting Workspace", 
                   icon='WORKSPACE')
```

### Button Action

```python
def execute(self, context):
    # 1. Get report from memory
    data_usage_text = bpy.data.texts.get("Scene_DataUsage")
    
    # 2. Get Scripting workspace (Blender default)
    scripting_workspace = bpy.data.workspaces.get('Scripting')
    
    # 3. Switch to Scripting workspace
    context.window.workspace = scripting_workspace
    
    # 4. Find Text Editor area
    for area in context.screen.areas:
        if area.type == 'TEXT_EDITOR':
            # 5. Load report + enable features
            space.text = data_usage_text
            space.show_line_numbers = True
            space.show_syntax_highlight = True
            break
    
    # 6. Dialog auto-closes
    return {'FINISHED'}
```

## ğŸ“ Report Content (Full Version with Stats)

### Scene_DataUsage Report (FULL VERSION)
```
============================================================
SCENE DATA USAGE REPORT
Generated: 2025-11-04 14:23:45
============================================================

Total Objects: 15
Total Materials: 8
Total Textures: 42

------------------------------------------------------------

OBJECT: Cube [8 verts] [1 material(s)]
  â””â”€ MATERIAL: Material.001
       â””â”€ BaseColor_1k.png
       
OBJECT: Sphere [482 verts] [2 material(s)]
  â””â”€ MATERIAL: Metal_Material
       â”œâ”€ Metallic_1k.png
       â”œâ”€ Roughness_1k.png
       â””â”€ Normal_1k.png

OBJECT: Character [15.2K verts] [3 material(s)]
  â””â”€ MATERIAL: Skin_Material
       â”œâ”€ Skin_Diffuse.png
       â””â”€ Skin_Normal.png

------------------------------------------------------------
MATERIAL SUMMARY:

  â€¢ Material.001: Used by 1 object(s) (Cube)
  â€¢ Metal_Material: Used by 1 object(s) (Sphere)
  â€¢ Skin_Material: Used by 1 object(s) (Character)

TEXTURE SUMMARY:

  â€¢ BaseColor_1k.png: Used in 1 material(s) (Material.001)
  â€¢ Metallic_1k.png: Used in 1 material(s) (Metal_Material)

------------------------------------------------------------
[LINKED LIBRARIES]

Library: Character_Rig
    â””â”€ //libs/character.blend

Library: Environment
    â””â”€ //libs/environment.blend
    
============================================================
```

### Scene_TexturePaths Report (FULL VERSION)
```
============================================================
TEXTURE PATHS REPORT
Generated: 2025-11-04 14:23:45
============================================================

Total Textures in Blend: 42
Linked Library Textures: 12
Unused Textures in Folder: 3

[FOUND]
  â€¢ //textures/BaseColor_1k.png == (1024x1024) [2.4 MB]
  â€¢ //textures/Normal_1k.png == (1024x1024) [3.1 MB]
  â€¢ //textures/Roughness_1k.png == (1024x1024) [512.3 KB]
  â€¢ //textures/Metallic_1k.png == (1024x1024) [450.2 KB]
  â€¢ //textures/AO_1k.png == (1024x1024) [380.5 KB]

[LINKED LIBRARIES]
Library: //libs/character.blend
  Textures: 8
    â€¢ Character_Diffuse.png (2048x2048)
    â€¢ Character_Normal.png (2048x2048)
    â€¢ Character_Roughness.png (2048x2048)

[MISSING]
  â€¢ âœ— //textures/old_texture.png
    Expected: G:/Projects/textures/old_texture.png

[PACKED]
  â€¢ ğŸ“¦ Generated_Texture == (512x512)

[UNUSED IN FOLDER /textures]
  â€¢ backup_color.jpg [1.8 MB]
  â€¢ test_normal.png [3.2 MB]
  
============================================================
```

## ğŸ¨ UI Features

### Visual Elements
- âœ… **Green checkmark** for completion
- ğŸ“„ **Document icon** for report headers
- â‹¯ **Three dots icon** for "more lines" indicator
- â„¹ **Info icon** for hints (shortened)
- ğŸ’¼ **Workspace icon** for button
- ğŸ”¢ **Dynamic line count** (auto-calculated)
- ğŸ“Š **File size display** - Shows texture sizes in B/KB/MB format

### Layout
- **Width**: 600px (like Blender Preferences)
- **Two boxed previews** - one for each report
- **Compressed text** (scale_y = 0.7) for more lines visible
- **Preview limit**: 15 lines per report
- **Smart indicators**: Shows exact number of remaining lines
- **Direct button** - no extra "View full reports:" label

### Behavior
- **Modal dialog** - blocks interaction until closed
- **Live report preview** - shows actual content (15 lines)
- **Smart line counting** - calculates remaining lines
- **Dual preview** - both reports visible
- **One-click switch** to Scripting workspace
- **Auto-load report** with syntax highlighting
- **Auto-close dialog** after button click

## ğŸš€ Advantages

1. âœ… **Best of Both Worlds** - Full stats in report, clean preview in dialog
2. âœ… **Smart Preview** - Skip stats, show actual content immediately
3. âœ… **Complete Reports** - Full statistics preserved for analysis
4. âœ… **Dual Report View** - Both reports visible in one dialog
5. âœ… **Smart Indicators** - Exact remaining line count
6. âœ… **One-Click Switch** - Direct to Scripting workspace
7. âœ… **Blender Native** - Uses Scripting workspace (default layout)
8. âœ… **Auto-Load** - Scene_DataUsage in Text Editor automatically
9. âœ… **Informative** - 15 lines of content gives good context

## ğŸ¯ Key Changes from Previous Version

- âœ… **Full Report**: Stats tetap ada (Total Objects/Materials/Textures)
- âœ… **Dialog Preview**: Skip stats section, langsung ke content
- âœ… **Smart Skip Logic**: 
  - Scene_DataUsage: Skip sampai setelah "----" divider
  - Scene_TexturePaths: Skip sampai [FOUND] atau [LINKED] section
- âŒ **Removed**: "View full reports:" label before button
- âœ… **Simplified**: Hint text "See full report â†’"
- âœ… **Best of Both**: Full stats in report, clean preview in dialog

---

**Created**: 2025-11-04  
**Dialog Width**: 600px  
**Preview Lines**: 15 per report  
**Operator ID**: `scene.analyze_deep`  
**Helper Operator**: `scene.open_text_editor_area`
